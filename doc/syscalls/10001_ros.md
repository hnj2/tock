---
driver number: 0x10001
---

# Read Only Syscalls

## Overview

This capsule provides read only system calls to userspace applications.
This is similar to the Linux vDSO syscalls.

The benefit of using these is that applications can avoid the context
switch overhead of traditional syscalls by just reading the value from
memory.

The value will only be as accurate as the last time the application was
switched to by the kernel.

The layout of the read only syscalls in the allow region depends on the
version. Userspace can use `command 0` to get the version information.

Versions are backwards compatible, that is new versions will only add
fields, not remove existing ones or change the order.

Version 1:
  |-------------------------|
  |       Count (u32)       |
  |-------------------------|
  |   Pending Tasks (u32)   |
  |-------------------------|
  |                         |
  |     Time Ticks (u64)    |
  |-------------------------|

## Data Consistency

Before returning from the kernel to userspace all ROS fields will be updated.
This ensures that at all times when an application is running, the ROS fields
are valid and consistent.

If userspace wants to read multiple values and ensure consistency between reads
the `count` field should be used to ensure that the kernel didn't run between
reads.

## Allow Shared

  * Description allow_shared() is used to setup the read only buffer:

  * ### Allow Read/Write Number: 0

    **Description**: Memory Buffer.

    **Argument 1**: Slice into which the read only syscal values should be stored

    **Returns**: SUCCESS

## Command

  * Description: command() is used to query the version:

  * ### Command Number: 0

    **Description**: Get Version.

    **Argument 1**: Unused

    **Argument 2**: Unused

    **Returns**: The latest version of ROS supported by the kernel.
